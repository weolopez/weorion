<!DOCTYPE html>
<!--[if IE 7]> <html class="no-js ie7"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8" />

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>tData prototype</title>
		<!--[if lt IE 9]>
		<script src="js/html5/html5.js"></script>
		<![endif]-->
		<link rel="stylesheet" href="css/styles.css"/>
		<link rel="stylesheet" href="css/at.css"/>
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
		<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />
		<style>
			#resizable {
				width: 100px;
				height: 100px;
				background: #ccc;
			}	
		</style>

		<!--<link rel="stylesheet" href="css/tdata.css"/>-->
	</head>
	<body>
		<div id="siteWrap">
			<!--header id="masthead"></header-->
			<section id="pageBody">
				<div class="container_24 clearfix" style="padding: 1em 0;">
					<select onchange="$('#resizable').attr('style', this.value);
							$().invSpaceSizing($('#TDIS'));">
						<option value=""  selected="selected">Select IAB Standard</option>
						<option value=""  >Rising Star Display Ad Units</option>
						<option value="width:970px;height:250px;background-color: white;visibility: visible;border: solid;">....Billboard 970x250</option>
						<option value="width:300px;height:600px;background-color: white;visibility: visible;border: solid;">....Filmstrip 300x600</option>
						<option value="width:300px;height:1050px;background-color: white;visibility: visible;border: solid;">....Portrait 300x1050</option>
						<option value="width:970px;height:90px;background-color: white;visibility: visible;border: solid;">....Pushdown 970x90</option>
						<option value="width:970px;height:90;background-color: white;visibility: visible;border: solid;">....Slider 970x90</option>
						<option value="width:300px;height:250px;background-color: white;visibility: visible;border: solid;">....Sidekick 300x250</option>
						<option value="width:300px;height:600px;background-color: white;visibility: visible;border: solid;">....Sidekick 300x600</option>
						<option value="width:970px;height:250px;background-color: white;visibility: visible;border: solid;">....Sidekick 970x250</option>

						<option value=""  >Universal Ad Package (UAP)</option>
						<option value="width:300px;height:250px;background-color: white;visibility: visible;border: solid;">....Medium Rectangle 300x250</option>
						<option value="width:180px;height:150px;background-color: white;visibility: visible;border: solid;">....Rectangle 180x150</option>
						<option value="width:160px;height:600px;background-color: white;visibility: visible;border: solid;">....Wide Skyscraper 160x600</option>
						<option value="width:728px;height:90px;background-color: white;visibility: visible;border: solid;">....Leaderboard 728x90</option>

						<option value=""  >Other Ad Units</option>
						<option value="width:970px;height:90px;background-color: white;visibility: visible;border: solid;">....Super Leaderboard 970x90</option>
						<option value="width:300px;height:600px;background-color: white;visibility: visible;border: solid;">....Half Page 300x600</option>
						<option value="width:120px;height:60px;background-color: white;visibility: visible;border: solid;">....Button 2 120x60</option>
						<option value="width:88px;height:31px;background-color: white;visibility: visible;border: solid;">....Micro Bar 88x31</option>

					</select>
					<script>
					</script>
					<div id="promos clearfix">
						<div class="container_24 clearfix" style="padding: 1em; width: auto;">
							<div id="resizable" style="width:450px;height:225px;background-color: white;visibility: visible;border: solid;">
								<div id="TDIS" data-tdata="IS7" data-tdata-replace="true" style="width: 100%;height: 100%;visibility: visible;"><img src="img/get10.gif" alt="Get a $10 Reward Card"/></div>
							</div>
							<div>
								<span id="TDISW">Width: </span>
								<span id="TDISH">Height: </span>
							</div>
						</div>
					</div>
				</div>

				<div class="container_24 clearfix">
					<section id="midSection">
						<div class="container_24 clearfix">
							<div>
								<table id="editgrid"></table>
								<div id="pagered"></div>
								<input type="BUTTON" id="bedata" value="Edit Selected" />	
							</div>
						</div>
					</section>
				</div>

			</section>
		</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<!--script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script
		<script src="js/jquery-1.9.0.min.js" type="text/javascript"></script-->
		<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
		<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>  
		<script src="js/app.js"></script>
		<script src="js/tdata.js"></script>
		<script>
						function handleSmallSpace(oldSpace, newSpace, offer) {
							newSpace.find('img').data('height', '40');
							newSpace.find('img').data('width', '40');
							newSpace.find('img').width(40);
							newSpace.find('img').height(40);
							var hig = newSpace.find('img').data('height');
							var tdataArrayObject = newSpace.parent();

							$().invSpaceSizing(tdataArrayObject);
							newSpace.find('h1').find('a').text(newSpace.find('h1').find('a').text().substring(0, 13));
							newSpace.find('p').text(newSpace.find('p').text().substring(0, 13));
							newSpace.removeClass('wide-layout-small');
							oldSpace.remove();
							newSpace.addClass('adOn').hide().css('visibility', 'visible').fadeIn();
						}

						//Delayed fading of content
						function tdataAnimate(oldSpace, newSpace) {
							oldSpace.delay(1000).fadeOut(function() {
								newSpace.addClass('adOn').hide().css('visibility', 'visible').fadeIn();
							});
						}

						var lastsel2;
						var editGrid = jQuery("#editgrid").jqGrid({
							jsonReader: {
								root: "offerRecord",
								page: "pageId",
								repeatitems: true,
								cell: "cell",
								id: "inventorySpaceId"
							},
							datatype: "json",
							colNames: ['Approved', 'Status', 'Inv No', 'statusCode', 'name', 'displayDescription', 'url', 'imageUrl', 'imageWidth', 'imageHeight'],
							colModel: [
								{name: 'Approved', index: 'Approved', width: 55, align: 'center', editable: true, edittype: "checkbox", editoptions: {value: "Yes:No"}},
								{name: 'status', index: 'status', width: 70, editable: true, edittype: "select", editoptions: {value: "Reviewed:Reviewed;Approved:Approved"}},
								{name: 'inventorySpaceId', index: 'inventorySpaceId', width: 55, editable: false, editoptions: {readonly: true, size: 10}},
								{name: 'statusCode', index: 'statusCode', width: 80, editable: true, editoptions: {size: 10}},
								{name: 'name', index: 'name', width: 90, editable: true, editoptions: {size: 25}},
								{name: 'displayDescription', index: 'displayDescription', width: 60, align: "right", editable: true, editoptions: {size: 10}},
								{name: 'url', index: 'url', width: 60, align: "right", editable: true, editoptions: {size: 10}},
								{name: 'imageUrl', index: 'imageUrl', width: 60, align: "right", editable: true, editoptions: {size: 10}},
								{name: 'imageWidth', index: 'imageWidth', width: 55, align: 'center', editable: false, editoptions: {readonly: true, size: 10}},
								{name: 'imageHeight', index: 'imageHeight', width: 70, editable: false, editoptions: {readonly: true, size: 10}}
							],
							rowNum: 10,
							rowList: [10, 20, 30],
							pager: '#pagered',
							sortname: 'id',
							viewrecords: true,
							sortorder: "desc",
							caption: "Editing Example",
							onSelectRow: function(id) {
								if (id && id !== lastsel2) {
									jQuery('#editgrid').jqGrid('restoreRow', lastsel2);
									jQuery('#editgrid').jqGrid('editRow', id, true);
									lastsel2 = id;

									$().replaceContent()
								}
							},
							editurl: "#"
						});


						$(document).ready(function() {
							function testWH() {
								var tdataArrayObject = $('#TDIS');
								var TDISW = $('#TDISW');
								var TDISH = $('#TDISH');
								TDISW.text('Width: ' + tdataArrayObject.width());
								TDISH.text('Height: ' + tdataArrayObject.height());
								$().invSpaceSizing(tdataArrayObject);
								$().invSpaceSizing($('#ipad'));
							}

							$().getRecommendations({
								consumptionEngine: 'ATTNET',
								pageID: '1'
							}, function(offers) {
								var mygrid = jQuery("#editgrid")[0];
								mygrid.addJSONData(offers);
								$("#bedata").click(function() {
									var gr = jQuery("#editgrid").jqGrid('getGridParam', 'selrow');
									if (gr != null)
										jQuery("#editgrid").jqGrid('editGridRow', gr, {height: 280, reloadAfterSubmit: false});
									else
										alert("Please Select Row");
								});
								testWH();

								$('#resizable').resizable().on('resize', function(event, ui) {
									//            console.log('resize');
									testWH();
								});

								function testWH() {
									var tdataArrayObject = $('#TDIS');
									var TDISW = $('#TDISW');
									var TDISH = $('#TDISH');
									TDISW.text('Width: ' + tdataArrayObject.width());
									TDISH.text('Height: ' + tdataArrayObject.height());
									$().invSpaceSizing(tdataArrayObject);
									$().invSpaceSizing($('#ipad'));
								}
							});
						});
		</script>
	</body>
</html>
